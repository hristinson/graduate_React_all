{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport 'cross-fetch/polyfill';\nimport is from 'is-lite';\nexport var ASYNC_STATUS = {\n  IDLE: 'IDLE',\n  PENDING: 'PENDING',\n  SUCCESS: 'SUCCESS',\n  ERROR: 'ERROR'\n};\n/**\n * Format a CORS response\n */\n\nexport function cors(data, statusCodeOrOptions) {\n  if (statusCodeOrOptions === void 0) {\n    statusCodeOrOptions = 200;\n  }\n\n  var _a = is.number(statusCodeOrOptions) ? {\n    statusCode: statusCodeOrOptions\n  } : statusCodeOrOptions,\n      _b = _a.allowCredentials,\n      allowCredentials = _b === void 0 ? true : _b,\n      _c = _a.allowedHeaders,\n      allowedHeaders = _c === void 0 ? [] : _c,\n      _d = _a.methods,\n      methods = _d === void 0 ? ['GET'] : _d,\n      _e = _a.origin,\n      origin = _e === void 0 ? '*' : _e,\n      _f = _a.responseHeaders,\n      responseHeaders = _f === void 0 ? undefined : _f,\n      _g = _a.statusCode,\n      statusCode = _g === void 0 ? 200 : _g;\n\n  var allowMethods = __spreadArray(__spreadArray([], __read(methods), false), ['OPTIONS'], false);\n\n  var allowHeaders = __spreadArray([], __read(new Set(__spreadArray(['Accept-Version', 'Accept', 'Authorization', 'Content-Length', 'Content-MD5', 'Content-Type', 'Date', 'x-amz-date', 'x-amz-security-token', 'X-Api-Version', 'X-CSRF-Token', 'X-Requested-With'], __read(allowedHeaders), false))), false);\n\n  var exposedHeaders;\n\n  if (responseHeaders) {\n    exposedHeaders = __assign({\n      'Access-Control-Expose-Headers': Object.keys(responseHeaders).join(',')\n    }, responseHeaders);\n  }\n\n  return {\n    body: JSON.stringify(data),\n    headers: __assign({\n      'Access-Control-Allow-Origin': origin,\n      'Access-Control-Allow-Credentials': allowCredentials,\n      'Access-Control-Allow-Methods': allowMethods.join(','),\n      'Access-Control-Allow-Headers': allowHeaders.join(',')\n    }, exposedHeaders),\n    statusCode: statusCode\n  };\n}\n/**\n *\n * @param condition\n * @param options\n */\n\nexport function poll(condition, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return __awaiter(this, void 0, void 0, function () {\n    var _a, delay, _b, maxRetries, retries;\n\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          _a = options.delay, delay = _a === void 0 ? 1 : _a, _b = options.maxRetries, maxRetries = _b === void 0 ? 5 : _b;\n          retries = 0;\n          _c.label = 1;\n\n        case 1:\n          if (!(!condition() && retries <= maxRetries)) return [3\n          /*break*/\n          , 3]; // eslint-disable-next-line no-await-in-loop\n\n          return [4\n          /*yield*/\n          , sleep(delay)];\n\n        case 2:\n          // eslint-disable-next-line no-await-in-loop\n          _c.sent();\n\n          retries++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 3:\n          if (retries >= maxRetries) {\n            throw new Error('Timeout');\n          }\n\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n}\n/**\n * Make async requests\n */\n\nexport function request(url, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return __awaiter(this, void 0, void 0, function () {\n    var body, headers, _a, method, params;\n\n    var _this = this;\n\n    return __generator(this, function (_b) {\n      body = options.body, headers = options.headers, _a = options.method, method = _a === void 0 ? 'GET' : _a;\n\n      if (!url) {\n        throw new Error('URL is required');\n      }\n\n      params = {\n        headers: __assign({\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }, headers),\n        method: method\n      };\n\n      if (body) {\n        params.body = JSON.stringify(body);\n      }\n\n      return [2\n      /*return*/\n      , fetch(url, params).then(function (response) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var text, content, error;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                return [4\n                /*yield*/\n                , response.text()];\n\n              case 1:\n                text = _a.sent();\n\n                try {\n                  content = JSON.parse(text);\n                } catch (_b) {\n                  content = text;\n                }\n\n                if (response.status > 299) {\n                  error = new Error(response.statusText);\n                  error.status = response.status;\n                  error.response = content;\n                  throw error;\n                } else {\n                  return [2\n                  /*return*/\n                  , content];\n                }\n\n                return [2\n                /*return*/\n                ];\n            }\n          });\n        });\n      })];\n    });\n  });\n}\n/**\n * Block execution\n */\n\nexport function sleep(seconds) {\n  if (seconds === void 0) {\n    seconds = 1;\n  }\n\n  return new Promise(function (resolve) {\n    setTimeout(resolve, seconds * 1000);\n  });\n}","map":{"version":3,"mappings":"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","names":["is","ASYNC_STATUS","IDLE","PENDING","SUCCESS","ERROR","cors","data","statusCodeOrOptions","number","statusCode","_b","allowCredentials","_c","allowedHeaders","_d","methods","_e","origin","_f","responseHeaders","undefined","_g","allowMethods","allowHeaders","Set","__spreadArray","exposedHeaders","Object","keys","join","body","JSON","stringify","headers","poll","condition","options","_a","maxRetries","retries","sleep","delay","Error","request","url","method","params","Accept","fetch","then","response","text","content","parse","status","error","statusText","seconds","Promise","setTimeout","resolve"],"sources":["/My_WORK/graduate_React/frontend/node_modules/@gilbarbara/helpers/src/async.ts"],"sourcesContent":["import 'cross-fetch/polyfill';\n\nimport is from 'is-lite';\n\nimport { CorsOptions, PollOptions, RequestError, RequestOptions } from './types';\n\nexport const ASYNC_STATUS = {\n  IDLE: 'IDLE',\n  PENDING: 'PENDING',\n  SUCCESS: 'SUCCESS',\n  ERROR: 'ERROR',\n} as const;\n\n/**\n * Format a CORS response\n */\nexport function cors(data: any, statusCodeOrOptions: number | CorsOptions = 200) {\n  const {\n    allowCredentials = true,\n    allowedHeaders = [],\n    methods = ['GET'],\n    origin = '*',\n    responseHeaders = undefined,\n    statusCode = 200,\n  } = is.number(statusCodeOrOptions) ? { statusCode: statusCodeOrOptions } : statusCodeOrOptions;\n\n  const allowMethods = [...methods, 'OPTIONS'];\n  const allowHeaders = [\n    ...new Set([\n      'Accept-Version',\n      'Accept',\n      'Authorization',\n      'Content-Length',\n      'Content-MD5',\n      'Content-Type',\n      'Date',\n      'x-amz-date',\n      'x-amz-security-token',\n      'X-Api-Version',\n      'X-CSRF-Token',\n      'X-Requested-With',\n      ...allowedHeaders,\n    ]),\n  ];\n  let exposedHeaders;\n\n  if (responseHeaders) {\n    exposedHeaders = {\n      'Access-Control-Expose-Headers': Object.keys(responseHeaders).join(','),\n      ...responseHeaders,\n    };\n  }\n\n  return {\n    body: JSON.stringify(data),\n    headers: {\n      'Access-Control-Allow-Origin': origin,\n      'Access-Control-Allow-Credentials': allowCredentials,\n      'Access-Control-Allow-Methods': allowMethods.join(','),\n      'Access-Control-Allow-Headers': allowHeaders.join(','),\n      ...exposedHeaders,\n    },\n    statusCode,\n  };\n}\n\n/**\n *\n * @param condition\n * @param options\n */\nexport async function poll(condition: () => boolean, options: PollOptions = {}): Promise<void> {\n  const { delay = 1, maxRetries = 5 } = options;\n  let retries = 0;\n\n  while (!condition() && retries <= maxRetries) {\n    // eslint-disable-next-line no-await-in-loop\n    await sleep(delay);\n    retries++;\n  }\n\n  if (retries >= maxRetries) {\n    throw new Error('Timeout');\n  }\n}\n\n/**\n * Make async requests\n */\nexport async function request<D = any>(url: string, options: RequestOptions = {}): Promise<D> {\n  const { body, headers, method = 'GET' }: RequestOptions = options;\n\n  if (!url) {\n    throw new Error('URL is required');\n  }\n\n  const params: RequestOptions = {\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      ...headers,\n    },\n    method,\n  };\n\n  if (body) {\n    params.body = JSON.stringify(body);\n  }\n\n  return fetch(url, params).then(async response => {\n    const text = await response.text();\n    let content: any;\n\n    try {\n      content = JSON.parse(text);\n    } catch {\n      content = text;\n    }\n\n    if (response.status > 299) {\n      const error = new Error(response.statusText) as RequestError;\n\n      error.status = response.status;\n      error.response = content;\n\n      throw error;\n    } else {\n      return content;\n    }\n  });\n}\n\n/**\n * Block execution\n */\nexport function sleep(seconds = 1) {\n  return new Promise(resolve => {\n    setTimeout(resolve, seconds * 1000);\n  });\n}\n"]},"metadata":{},"sourceType":"module"}
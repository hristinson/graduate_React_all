{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Children, isValidElement, useEffect, useRef } from 'react';\nimport { useMeasure, useSetState } from 'react-use';\nimport { css } from '@emotion/react';\nimport styled from '@emotion/styled';\nimport { omit, unique } from '@gilbarbara/helpers';\nimport { Tab } from './Tab';\nimport { ButtonBase } from '../ButtonBase';\nimport { Loader } from '../Loader';\nimport { getColorVariant, getTheme, px } from '../modules/helpers';\nimport { getStyledOptions, isDarkMode, marginStyles } from '../modules/system';\nimport { NonIdealState } from '../NonIdealState';\nconst StyledTabs = styled('div', getStyledOptions())(props => {\n  const {\n    direction\n  } = props;\n  return css`\n    display: ${direction === 'vertical' ? 'block' : 'flex'};\n    ${marginStyles(props)};\n  `;\n});\nconst StyledMenu = styled('div', getStyledOptions())(props => {\n  const {\n    direction,\n    width\n  } = props;\n  const {\n    grayLighter,\n    spacing\n  } = getTheme(props);\n  const isHorizontal = direction === 'horizontal';\n  const isVertical = direction === 'vertical';\n  return css`\n    align-items: flex-start;\n    display: flex;\n    flex-direction: ${isVertical ? 'row' : 'column'};\n    margin-bottom: ${isVertical ? spacing.md : undefined};\n    margin-right: ${isHorizontal ? spacing.md : undefined};\n    max-width: ${width ? px(width) : undefined};\n    overflow: ${isVertical ? 'auto hidden' : undefined};\n    position: relative;\n\n    &:before {\n      border-bottom: ${isVertical ? `1px solid ${grayLighter}` : undefined};\n      border-right: ${isHorizontal ? `1px solid ${grayLighter}` : undefined};\n      bottom: 0;\n      content: '';\n      left: ${isVertical ? 0 : undefined};\n      position: absolute;\n      right: ${isHorizontal ? '-1px' : 0};\n      top: ${isHorizontal ? 0 : undefined};\n    }\n  `;\n});\nconst StyledMenuItem = styled(ButtonBase, getStyledOptions('disabled'))(props => {\n  const {\n    direction,\n    disableActiveBorderRadius,\n    disabled,\n    isActive,\n    shade,\n    variant = 'primary'\n  } = props;\n  const {\n    grayDarker,\n    grayMid,\n    grayScale,\n    spacing,\n    variants\n  } = getTheme(props);\n  const darkMode = isDarkMode(props);\n  const {\n    bg\n  } = getColorVariant(variant, shade, variants);\n  let color = darkMode ? grayScale['20'] : grayDarker;\n  const isVertical = direction === 'vertical';\n  const isHorizontal = direction === 'horizontal';\n\n  if (disabled) {\n    color = grayMid;\n  } else if (isActive) {\n    color = bg;\n  }\n\n  return css`\n    color: ${disabled ? grayMid : color};\n    cursor: ${disabled ? 'not-allowed' : 'pointer'};\n    line-height: 1;\n    padding: ${spacing.xs} ${spacing.md};\n    position: relative;\n    width: ${isHorizontal ? '100%' : undefined};\n    white-space: nowrap;\n\n    ${isActive && css`\n      &:before {\n        background-color: ${bg};\n        bottom: ${isVertical ? '-1px' : 0};\n        content: '';\n        display: block;\n        height: ${isVertical ? '3px' : undefined};\n        left: ${isVertical ? 0 : undefined};\n        position: absolute;\n        right: ${isHorizontal ? '-1px' : 0};\n        top: ${isHorizontal ? 0 : undefined};\n        width: ${isHorizontal ? '3px' : undefined};\n\n        ${!disableActiveBorderRadius && css`\n          border-top-left-radius: 3px;\n          border-top-right-radius: ${isVertical ? '3px' : undefined};\n          border-bottom-left-radius: ${isHorizontal ? '3px' : undefined};\n        `};\n      }\n    `}\n  `;\n});\nconst StyledContent = styled('div', getStyledOptions())(props => {\n  const {\n    maxHeight,\n    minHeight\n  } = props;\n  return css`\n    max-height: ${maxHeight ? px(maxHeight) : undefined};\n    min-height: ${minHeight ? px(minHeight) : undefined};\n    overflow-y: auto;\n  `;\n});\nexport function Tabs(props) {\n  const {\n    children,\n    initialId = '',\n    loader,\n    maxHeight,\n    minHeight,\n    noContent,\n    onClick,\n    shade,\n    variant,\n    ...rest\n  } = props;\n  const [{\n    activeId,\n    error,\n    isReady,\n    tabs,\n    width\n  }, setState] = useSetState({\n    activeId: initialId,\n    error: false,\n    isReady: false,\n    tabs: [],\n    width: null\n  });\n  const isMounted = useRef(false);\n  const uniqueId = useRef(unique(6));\n  const [ref, measurements] = useMeasure();\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  useEffect(() => {\n    const nextState = {\n      error: false,\n      isReady: true,\n      tabs: []\n    };\n    Children.forEach(children, (child, index) => {\n      if (!isValidElement(child)) {\n        return;\n      }\n\n      if (child.type === Tab) {\n        nextState.tabs.push(omit(child.props, 'children'));\n\n        if (!activeId && index === 0) {\n          nextState.activeId = child.props.id;\n        }\n      } else {\n        nextState.error = true; // eslint-disable-next-line no-console\n\n        console.warn('Invalid children detected. Only the Tab component is allowed.');\n      }\n    });\n    setState(nextState);\n  }, [activeId, children, setState]);\n  useEffect(() => {\n    if (measurements.width && measurements.width !== width) {\n      setState({\n        width: measurements.width\n      });\n    }\n  }, [measurements, setState, width]);\n\n  const handleClickItem = event => {\n    const {\n      disabled,\n      id = ''\n    } = event.currentTarget.dataset;\n\n    if (activeId === id || disabled === 'true') {\n      return;\n    }\n\n    setState({\n      activeId: id\n    });\n\n    if (onClick) {\n      onClick(id);\n    }\n  };\n\n  if (error) {\n    return null;\n  }\n\n  const content = {};\n\n  if (isReady) {\n    if (tabs.length) {\n      if (width || rest.direction === 'horizontal') {\n        content.menu = _jsx(StyledMenu, {\n          \"data-component-name\": \"TabsMenu\",\n          direction: rest.direction,\n          role: \"tablist\",\n          width: width,\n          children: tabs.map(d => _jsx(StyledMenuItem, {\n            \"aria-controls\": `panel-${uniqueId.current}-${d.id}`,\n            \"aria-selected\": d.id === activeId,\n            \"data-component-name\": \"TabsMenuItem\",\n            \"data-disabled\": !!d.disabled,\n            \"data-id\": d.id,\n            direction: rest.direction,\n            disableActiveBorderRadius: rest.disableActiveBorderRadius,\n            disabled: !!d.disabled,\n            isActive: d.id === activeId,\n            onClick: handleClickItem,\n            role: \"tab\",\n            shade: shade,\n            variant: variant,\n            children: d.title\n          }, d.id))\n        });\n      }\n\n      content.main = _jsx(StyledContent, {\n        \"data-component-name\": \"TabsContent\",\n        maxHeight: maxHeight,\n        minHeight: minHeight,\n        children: Children.toArray(children).filter(d => isValidElement(d) && d.props.id === activeId).map(d => isValidElement(d) && _jsx(\"div\", {\n          \"data-component-name\": \"TabsPanel\",\n          id: `panel-${uniqueId.current}-${d.props.id}`,\n          role: \"tabpanel\",\n          children: d.props.children\n        }, d.props.id))\n      });\n    } else {\n      content.main = noContent || _jsx(NonIdealState, {\n        description: \"Content not available\",\n        icon: \"danger\",\n        size: \"sm\"\n      });\n    }\n  } else {\n    content.main = loader || _jsx(Loader, {});\n  }\n\n  return _jsxs(StyledTabs, {\n    \"data-component-name\": \"Tabs\",\n    ...rest,\n    children: [rest.direction === 'vertical' && _jsx(\"div\", {\n      ref: ref\n    }), content.menu, content.main]\n  });\n}\nTabs.defaultProps = {\n  direction: 'vertical',\n  disableActiveBorderRadius: false,\n  shade: 'mid',\n  variant: 'primary'\n};\nexport { Tab } from './Tab';","map":{"version":3,"mappings":"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","names":["Children","isValidElement","useEffect","useRef","useMeasure","useSetState","css","styled","omit","unique","Tab","ButtonBase","Loader","getColorVariant","getTheme","px","getStyledOptions","isDarkMode","marginStyles","NonIdealState","StyledTabs","props","direction","StyledMenu","width","grayLighter","spacing","isHorizontal","isVertical","md","undefined","StyledMenuItem","disableActiveBorderRadius","disabled","isActive","shade","variant","grayDarker","grayMid","grayScale","variants","darkMode","bg","color","xs","StyledContent","maxHeight","minHeight","Tabs","children","initialId","loader","noContent","onClick","rest","activeId","error","isReady","tabs","setState","isMounted","uniqueId","ref","measurements","current","nextState","forEach","child","index","type","push","id","console","warn","handleClickItem","event","currentTarget","dataset","content","length","menu","_jsx","role","map","d","title","main","toArray","filter","description","icon","size","_jsxs","defaultProps"],"sources":["/My_WORK/graduate_React/frontend/node_modules/@gilbarbara/components/src/Tabs/index.tsx"],"sourcesContent":["import {\n  Children,\n  CSSProperties,\n  isValidElement,\n  MouseEvent,\n  ReactNode,\n  useEffect,\n  useRef,\n} from 'react';\nimport { useMeasure, useSetState } from 'react-use';\nimport { css } from '@emotion/react';\nimport styled from '@emotion/styled';\nimport { omit, unique } from '@gilbarbara/helpers';\nimport { AnyObject } from '@gilbarbara/types';\nimport { StandardLonghandProperties } from 'csstype';\nimport { SetOptional } from 'type-fest';\n\nimport { Tab, TabProps } from './Tab';\n\nimport { ButtonBase } from '../ButtonBase';\nimport { Loader } from '../Loader';\nimport { getColorVariant, getTheme, px } from '../modules/helpers';\nimport { getStyledOptions, isDarkMode, marginStyles } from '../modules/system';\nimport { NonIdealState } from '../NonIdealState';\nimport { Direction, StyledProps, WithChildren, WithColor, WithMargin } from '../types';\n\nexport interface TabsProps extends StyledProps, WithChildren, WithColor, WithMargin {\n  /** @default vertical */\n  direction?: Direction;\n  /** @default false */\n  disableActiveBorderRadius?: boolean;\n  initialId?: string;\n  loader?: ReactNode;\n  maxHeight?: number | StandardLonghandProperties['maxHeight'];\n  minHeight?: number | StandardLonghandProperties['minHeight'];\n  noContent?: ReactNode;\n  onClick?: (id: string) => void;\n  style?: CSSProperties;\n}\n\ninterface State {\n  activeId: string;\n  error: boolean;\n  isReady: boolean;\n  tabs: Omit<TabProps, 'children'>[];\n  width: number | null;\n}\n\nconst StyledTabs = styled(\n  'div',\n  getStyledOptions(),\n)<TabsProps>(props => {\n  const { direction } = props;\n\n  return css`\n    display: ${direction === 'vertical' ? 'block' : 'flex'};\n    ${marginStyles(props)};\n  `;\n});\n\nconst StyledMenu = styled(\n  'div',\n  getStyledOptions(),\n)<TabsProps & { width: number | null }>(props => {\n  const { direction, width } = props;\n  const { grayLighter, spacing } = getTheme(props);\n\n  const isHorizontal = direction === 'horizontal';\n  const isVertical = direction === 'vertical';\n\n  return css`\n    align-items: flex-start;\n    display: flex;\n    flex-direction: ${isVertical ? 'row' : 'column'};\n    margin-bottom: ${isVertical ? spacing.md : undefined};\n    margin-right: ${isHorizontal ? spacing.md : undefined};\n    max-width: ${width ? px(width) : undefined};\n    overflow: ${isVertical ? 'auto hidden' : undefined};\n    position: relative;\n\n    &:before {\n      border-bottom: ${isVertical ? `1px solid ${grayLighter}` : undefined};\n      border-right: ${isHorizontal ? `1px solid ${grayLighter}` : undefined};\n      bottom: 0;\n      content: '';\n      left: ${isVertical ? 0 : undefined};\n      position: absolute;\n      right: ${isHorizontal ? '-1px' : 0};\n      top: ${isHorizontal ? 0 : undefined};\n    }\n  `;\n});\n\nconst StyledMenuItem = styled(\n  ButtonBase,\n  getStyledOptions('disabled'),\n)<\n  Pick<TabsProps, 'direction' | 'disableActiveBorderRadius' | 'shade' | 'variant'> & {\n    disabled: boolean;\n    isActive: boolean;\n  }\n>(props => {\n  const {\n    direction,\n    disableActiveBorderRadius,\n    disabled,\n    isActive,\n    shade,\n    variant = 'primary',\n  } = props;\n  const { grayDarker, grayMid, grayScale, spacing, variants } = getTheme(props);\n  const darkMode = isDarkMode(props);\n\n  const { bg } = getColorVariant(variant, shade, variants);\n  let color = darkMode ? grayScale['20'] : grayDarker;\n  const isVertical = direction === 'vertical';\n  const isHorizontal = direction === 'horizontal';\n\n  if (disabled) {\n    color = grayMid;\n  } else if (isActive) {\n    color = bg;\n  }\n\n  return css`\n    color: ${disabled ? grayMid : color};\n    cursor: ${disabled ? 'not-allowed' : 'pointer'};\n    line-height: 1;\n    padding: ${spacing.xs} ${spacing.md};\n    position: relative;\n    width: ${isHorizontal ? '100%' : undefined};\n    white-space: nowrap;\n\n    ${isActive &&\n    css`\n      &:before {\n        background-color: ${bg};\n        bottom: ${isVertical ? '-1px' : 0};\n        content: '';\n        display: block;\n        height: ${isVertical ? '3px' : undefined};\n        left: ${isVertical ? 0 : undefined};\n        position: absolute;\n        right: ${isHorizontal ? '-1px' : 0};\n        top: ${isHorizontal ? 0 : undefined};\n        width: ${isHorizontal ? '3px' : undefined};\n\n        ${!disableActiveBorderRadius &&\n        css`\n          border-top-left-radius: 3px;\n          border-top-right-radius: ${isVertical ? '3px' : undefined};\n          border-bottom-left-radius: ${isHorizontal ? '3px' : undefined};\n        `};\n      }\n    `}\n  `;\n});\n\nconst StyledContent = styled(\n  'div',\n  getStyledOptions(),\n)<Pick<TabsProps, 'maxHeight' | 'minHeight'>>(props => {\n  const { maxHeight, minHeight } = props;\n\n  return css`\n    max-height: ${maxHeight ? px(maxHeight) : undefined};\n    min-height: ${minHeight ? px(minHeight) : undefined};\n    overflow-y: auto;\n  `;\n});\n\nexport function Tabs(props: TabsProps) {\n  const {\n    children,\n    initialId = '',\n    loader,\n    maxHeight,\n    minHeight,\n    noContent,\n    onClick,\n    shade,\n    variant,\n    ...rest\n  } = props;\n  const [{ activeId, error, isReady, tabs, width }, setState] = useSetState<State>({\n    activeId: initialId,\n    error: false,\n    isReady: false,\n    tabs: [],\n    width: null,\n  });\n  const isMounted = useRef(false);\n  const uniqueId = useRef(unique(6));\n  const [ref, measurements] = useMeasure<HTMLDivElement>();\n\n  useEffect(() => {\n    isMounted.current = true;\n\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const nextState: SetOptional<State, 'activeId' | 'width'> = {\n      error: false,\n      isReady: true,\n      tabs: [],\n    };\n\n    Children.forEach(children, (child, index) => {\n      if (!isValidElement(child)) {\n        return;\n      }\n\n      if (child.type === Tab) {\n        nextState.tabs.push(omit(child.props as TabProps, 'children'));\n\n        if (!activeId && index === 0) {\n          nextState.activeId = child.props.id;\n        }\n      } else {\n        nextState.error = true;\n        // eslint-disable-next-line no-console\n        console.warn('Invalid children detected. Only the Tab component is allowed.');\n      }\n    });\n\n    setState(nextState);\n  }, [activeId, children, setState]);\n\n  useEffect(() => {\n    if (measurements.width && measurements.width !== width) {\n      setState({ width: measurements.width });\n    }\n  }, [measurements, setState, width]);\n\n  const handleClickItem = (event: MouseEvent<HTMLButtonElement>) => {\n    const { disabled, id = '' } = event.currentTarget.dataset;\n\n    if (activeId === id || disabled === 'true') {\n      return;\n    }\n\n    setState({ activeId: id });\n\n    if (onClick) {\n      onClick(id);\n    }\n  };\n\n  if (error) {\n    return null;\n  }\n\n  const content: AnyObject = {};\n\n  if (isReady) {\n    if (tabs.length) {\n      if (width || rest.direction === 'horizontal') {\n        content.menu = (\n          <StyledMenu\n            data-component-name=\"TabsMenu\"\n            direction={rest.direction}\n            role=\"tablist\"\n            width={width}\n          >\n            {tabs.map(d => (\n              <StyledMenuItem\n                key={d.id}\n                aria-controls={`panel-${uniqueId.current}-${d.id}`}\n                aria-selected={d.id === activeId}\n                data-component-name=\"TabsMenuItem\"\n                data-disabled={!!d.disabled}\n                data-id={d.id}\n                direction={rest.direction}\n                disableActiveBorderRadius={rest.disableActiveBorderRadius}\n                disabled={!!d.disabled}\n                isActive={d.id === activeId}\n                onClick={handleClickItem}\n                role=\"tab\"\n                shade={shade}\n                variant={variant}\n              >\n                {d.title}\n              </StyledMenuItem>\n            ))}\n          </StyledMenu>\n        );\n      }\n\n      content.main = (\n        <StyledContent\n          data-component-name=\"TabsContent\"\n          maxHeight={maxHeight}\n          minHeight={minHeight}\n        >\n          {Children.toArray(children)\n            .filter(d => isValidElement(d) && d.props.id === activeId)\n            .map(\n              d =>\n                isValidElement(d) && (\n                  <div\n                    key={d.props.id}\n                    data-component-name=\"TabsPanel\"\n                    id={`panel-${uniqueId.current}-${d.props.id}`}\n                    role=\"tabpanel\"\n                  >\n                    {d.props.children}\n                  </div>\n                ),\n            )}\n        </StyledContent>\n      );\n    } else {\n      content.main = noContent || (\n        <NonIdealState description=\"Content not available\" icon=\"danger\" size=\"sm\" />\n      );\n    }\n  } else {\n    content.main = loader || <Loader />;\n  }\n\n  return (\n    <StyledTabs data-component-name=\"Tabs\" {...rest}>\n      {rest.direction === 'vertical' && <div ref={ref} />}\n      {content.menu}\n      {content.main}\n    </StyledTabs>\n  );\n}\n\nTabs.defaultProps = {\n  direction: 'vertical',\n  disableActiveBorderRadius: false,\n  shade: 'mid',\n  variant: 'primary',\n};\n\nexport { Tab } from './Tab';\n"]},"metadata":{},"sourceType":"module"}